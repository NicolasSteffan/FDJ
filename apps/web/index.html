<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>FDJ ‚Äì Concours IA Euromillions</title>
    
    <!-- Styles CSS int√©gr√©s pour √©viter les probl√®mes de chemins -->
    <!-- CSS LED Components - Conforme bible.md r√®gle 3 -->
    <link rel="stylesheet" href="./led-components.css">
    
    <!-- API SQLite Backend -->
    <script src="sqlite-api.js"></script>
    <script src="csv-import.js"></script>
    <script src="force-data-demo.js"></script>
    <!-- CSS Switch Components - Conforme bible.md r√®gle 3 -->
    <link rel="stylesheet" href="./switch-components.css">
    <!-- CSS Homepage Components - Conforme bible.md r√®gle 3 -->
    <link rel="stylesheet" href="./homepage-components.css">
    <!-- CSS Lottery Components - Conforme bible.md r√®gle 3 -->
    <link rel="stylesheet" href="./lottery-components.css">
    <!-- CSS Tirage Components - Conforme bible.md r√®gle 3 -->
    <link rel="stylesheet" href="./tirage-components.css">
    <!-- CSS Tables Components - Conforme bible.md r√®gle 3 -->
    <link rel="stylesheet" href="./tables-components.css">

    <style>
      /* Styles page d'accueil externalis√©s vers homepage-components.css - bible.md conforme */

      /* Boules de loterie externalis√©es vers lottery-components.css - bible.md conforme */

      /* Boutons et status externalis√©s vers homepage-components.css - bible.md conforme */

      /* Tables et s√©lecteurs externalis√©s vers tables-components.css - bible.md conforme */

      /* Page Tirage externalis√©e vers tirage-components.css - bible.md conforme */
      
      /* Styles interrupteur externalis√©s vers switch-components.css - bible.md conforme */
      

      
      /* Sections r√©sultats et boules externalis√©es vers tirage-components.css et lottery-components.css - bible.md conforme */
      
      /* Page Scraping - Styles sp√©cifiques */
      .scraping-mode-selector {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
      }
      
      .scraping-mode-btn {
        flex: 1;
        padding: 10px;
        border: 2px solid #666;
        background: #2a2a2a;
        color: #ecf0f1;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      
      .scraping-mode-btn.active {
        border-color: #3498db;
        background: #34495e;
      }
      
      .scraping-mode-btn:hover {
        background: #34495e;
      }

      /* Styles pour les sections cach√©es */
      .section.hidden {
        display: none;
      }

      /* Styles pour la navigation active */
      .menu a.active {
        background: #3498db;
        color: white;
      }
    </style>
  </head>

  <body>
    <div class="background"></div>
    
    <header class="topbar">
      <canvas id="menuCanvas" aria-hidden="true"></canvas>
      <img id="logo" src="./assets/yesdata-logo.jpg" alt="YesData" />
      <div class="brand">YesData - EuroMillion</div>
      <!-- Navigation sera charg√©e dynamiquement -->
      <div id="navigation-container"></div>
    </header>

    <main class="content">
      <!-- Section Accueil -->
      <section id="home" class="section">
        <h1><span class="tirage-led"></span> EuroMillions IA - Concours FDJ</h1>
        
        <div class="demo-card">
          <h2>üéØ Objectif du Concours</h2>
          <p>D√©velopper une IA capable de pr√©dire les num√©ros EuroMillions avec la meilleure pr√©cision possible.</p>
          <p><strong>Donn√©es :</strong> Historique complet des tirages EuroMillions depuis 2004</p>
          <p><strong>Challenge :</strong> Pr√©dire les 5 num√©ros + 2 √©toiles du prochain tirage</p>
        </div>

        <div class="demo-card">
          <h2>üöÄ Fonctionnalit√©s</h2>
          <ul>
            <li><strong>Scraping :</strong> R√©cup√©ration automatique des donn√©es FDJ</li>
            <li><strong>Training IA :</strong> Entra√Ænement de mod√®les sur l'historique</li>
            <li><strong>Pr√©dictions :</strong> G√©n√©ration de num√©ros optimis√©s</li>
            <li><strong>Analyse :</strong> Statistiques et patterns des tirages</li>
          </ul>
        </div>

        <div class="demo-card">
          <h2>‚ö° Actions Rapides</h2>
          <div style="display: flex; gap: 10px; flex-wrap: wrap;">
            <button onclick="navigateTo('scraping')" class="btn-generic">
              üîç Scraper les donn√©es
            </button>
            <button onclick="navigateTo('training')" class="btn-generic">
              ü§ñ Entra√Æner l'IA
            </button>
            <button onclick="navigateTo('tirage')" class="btn-generic">
              üé≤ Nouveau tirage
            </button>
            <button onclick="navigateTo('ia-config')" class="btn-generic">
              ‚öôÔ∏è Configuration IA
            </button>
          </div>
        </div>

        <div class="demo-card">
          <h2>üìä Statistiques</h2>
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
            <div style="background: #2a2a2a; padding: 15px; border-radius: 5px; text-align: center;">
              <div style="color: #3498db; font-size: 24px; font-weight: bold;" id="totalTirages">0</div>
              <div style="color: #888; font-size: 12px;">Tirages en base</div>
            </div>
            <div style="background: #2a2a2a; padding: 15px; border-radius: 5px; text-align: center;">
              <div style="color: #27ae60; font-size: 24px; font-weight: bold;" id="modelsCount">0</div>
              <div style="color: #888; font-size: 12px;">Mod√®les entra√Æn√©s</div>
            </div>
            <div style="background: #2a2a2a; padding: 15px; border-radius: 5px; text-align: center;">
              <div style="color: #e74c3c; font-size: 24px; font-weight: bold;" id="lastAccuracy">0%</div>
              <div style="color: #888; font-size: 12px;">Derni√®re pr√©cision</div>
            </div>
          </div>
        </div>

        <div class="status">
          <p><strong>Version :</strong> V0.004A - Interface Training IA compl√®te</p>
          <p><strong>Statut :</strong> <span id="systemStatus">üü¢ Syst√®me op√©rationnel</span></p>
          <p><strong>Derni√®re mise √† jour :</strong> <span id="lastUpdate">Chargement...</span></p>
        </div>
      </section>

      <!-- Les pages Scraping, Tirage et IA-Config sont maintenant dans pages/ -->
      
      <!-- Section Admin Diagnostic -->
      <section id="admin-diagnostic" class="section hidden">
        <h1><span class="tirage-led"></span> Admin - Diagnostic Base de Donn√©es</h1>
        <div class="demo-card">
          <h2>üîç Diagnostic de la Base de Donn√©es</h2>
          <p>Outils de diagnostic et de maintenance de la base de donn√©es.</p>
          <button onclick="alert('Diagnostic √† impl√©menter')" class="btn-generic">
            Lancer Diagnostic
          </button>
        </div>
      </section>

      <!-- Section Admin Monitoring -->
      <section id="admin-monitoring" class="section hidden">
        <h1><span class="tirage-led"></span> Admin - Monitoring Base de Donn√©es</h1>
        <div class="demo-card">
          <h2>üìä Monitoring de la Base de Donn√©es</h2>
          <p>Surveillance en temps r√©el de la base de donn√©es SQLite.</p>
          <button onclick="alert('Monitoring √† impl√©menter')" class="btn-generic">
            Voir Monitoring
          </button>
        </div>
      </section>
      
    </main>

    <!-- Scripts principaux -->
    <script src="js/router.js"></script>
    
    <!-- Script principal de l'application -->
    <script>
      // ========================================
      // INITIALISATION DE L'APPLICATION
      // ========================================

      class App {
        constructor() {
          this.init();
        }

        async init() {
          try {
            // Charger les composants
            await this.loadComponents();
            
            // Initialiser les statistiques
            this.updateStats();
            
            // Mettre √† jour le timestamp
            this.updateLastUpdate();
            
            console.log('‚úÖ Application initialis√©e avec succ√®s');
          } catch (error) {
            console.error('‚ùå Erreur lors de l\'initialisation:', error);
          }
        }

        async loadComponents() {
          // Charger le header
          const headerContainer = document.getElementById('header-container');
          if (headerContainer) {
            const headerResponse = await fetch('components/header.html');
            const headerHtml = await headerResponse.text();
            headerContainer.innerHTML = headerHtml;

            // Charger la navigation dans le header
            const navContainer = document.getElementById('navigation-container');
            if (navContainer) {
              const navResponse = await fetch('components/navigation.html');
              const navHtml = await navResponse.text();
              navContainer.innerHTML = navHtml;
            }
          }
        }

        updateStats() {
          // Simuler des statistiques (√† remplacer par de vraies donn√©es)
          document.getElementById('totalTirages').textContent = '2847';
          document.getElementById('modelsCount').textContent = '3';
          document.getElementById('lastAccuracy').textContent = '23%';
        }

        updateLastUpdate() {
          const now = new Date();
          document.getElementById('lastUpdate').textContent = now.toLocaleString('fr-FR');
        }
      }

      // Initialiser l'application quand le DOM est pr√™t
      document.addEventListener('DOMContentLoaded', () => {
        new App();
      });

      // ========================================
      // FONCTIONS UTILITAIRES GLOBALES
      // ========================================

      // Fonction pour afficher l'historique (compatibilit√©)
      function showHistorique() {
        console.log('Affichage de l\'historique...');
        // √Ä impl√©menter avec le nouveau syst√®me
      }

      // Fonction pour afficher une section (compatibilit√©)
      function showSection(sectionName) {
        if (typeof navigateTo === 'function') {
          navigateTo(sectionName);
        }
      }

      // √âcouter les changements de page pour mettre √† jour les statistiques
      document.addEventListener('pageChanged', (e) => {
        const { page } = e.detail;
        
        // Mettre √† jour le titre de la page
        const titles = {
          'home': 'EuroMillions IA - Accueil',
          'training': 'Training des Mod√®les IA',
          'scraping': 'Scraping des Donn√©es',
          'tirage': 'Nouveau Tirage',
          'ia-config': 'Configuration IA',
          'status': 'Statut du Syst√®me'
        };
        
        document.title = titles[page] || 'FDJ ‚Äì Concours IA Euromillions';
      });
    </script>
  </body>
</html>
